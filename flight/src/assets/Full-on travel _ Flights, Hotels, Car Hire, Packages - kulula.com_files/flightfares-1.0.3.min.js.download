
ï»¿
$(document).click(function(e){if(($(e.target).closest(".FaresSelector").length==0)&&($(e.target).closest("a").attr('class')!='FaresSelectorLinks')){$('.FaresSelector.selector').fadeOut("slow");$(('.FaresSelector')).promise().done(function(){$('.FaresSelector').remove();});}});$(document).ready(function(){$(".FaresSelectorLinks").click(function(){var FlightFrom=$(this).attr('fromcode');var FlightTo=$(this).attr('tocode');var FlightHeading=$(this).attr('heading');var DisplayType=$(this).attr('ftype');$('.FaresSelector').remove();var objHeight=$(this).closest('.quickselector').height()+'px';var objWidth=$(this).closest('.quickselector').width()+'px';if($(this).closest('.quickselector').parent().attr('class')=='banner'){objParentHeight=$(this).closest('.quickselector').parent('.banner').height();if($(this).closest('.quickselector').width()>=940){if(objParentHeight>=440){objWidth="40%";}else{}}else{}
if($(this).closest('.quickselector').parent('.banner').width()==902&$(this).closest('.quickselector').parent('.banner').height()==326){objWidth="";}
objHeight=objParentHeight*65/100;objHeight='auto';}
var trip="";trip+='<div class="FaresSelector selector" style="overflow:hidden; height: '+objHeight+'; width:'+objWidth+';">';trip+='<h2>'+FlightHeading+'</h2>';trip+='<fieldset><div class="field"><label>Would you like to login:</label>';trip+='<ul class="tabbed question" style="">';trip+='<li id="lifares-option-vitality" class="faresquestion"><input type="radio" id="radfares-option-vitality" name="faresselector-options" value="discovery"><label for="radfares-option-vitality"><span class="opt-discovery" id="vitality"></span></label></li>';trip+='<li id="lifares-option-no" class="faresquestion selected"><input type="radio" id="radfares-option-no" name="faresselector-options" value="no" checked="checked"><label for="radfares-option-no"><span class="opt-no-thanks">No thanks <b>(Not a member)</b></span></label></li>';trip+='</ul></div></fieldset>';trip+='<div class="FaresSelectorLoginPanel" style="display:none;">';trip+='<fieldset><div class="field"><label>Login to book and receive your Discovery Vitality discount, select "no thanks" if you are not a member.</label></div></fieldset>';trip+='<div class="action"><a href="http://www.kulula.com/discovery-vitality/login" class="content-btn-small LoginFaresSelector" id="FareSelectorLoginBTN">LOGIN NOW</a></div></div>';trip+='<div class="FaresSelectorFlightPanel" style="">';trip+='<fieldset><div class="field"><label>Search flights:</label><ul id="flightFarestype" class="tabbed two">';trip+='<li id="lifares-oneway" class="farestrip"><input type="radio" id="radfares-oneway" name="flightfares-type" value="OW"><label for="radfares-oneway">One-way</label></li>';trip+='<li id="lifares-return" class="farestrip selected"><input type="radio" id="radfares-return" name="flightfares-type" value="RT" checked="checked"><label for="radfares-return">Return</label></li>';trip+='</ul><div class="clear"></div></div></fieldset>';trip+='<fieldset><div id="pax-adult"><div class="field">';trip+='<label for="ddlAdults">Adults:</label>';trip+='<select id="ddlAdults">';trip+='<option value="1">1</option>';trip+='<option value="2">2</option>';trip+='<option value="3">3</option>';trip+='<option value="4">4</option>';trip+='<option value="5">5</option>';trip+='<option value="6">6</option>';trip+='<option value="7">7</option>';trip+='<option value="8">8</option>';trip+='<option value="9">9</option>';trip+='</select>';trip+='<span class="help-text">&gt;12 years</span></div></div>';trip+='<div id="pax-child">';trip+='<div class="field">';trip+='<label for="ddlChildren">Children:</label>';trip+='<select id="ddlChildren">';trip+='<option value="0">0</option>';trip+='<option value="1">1</option>';trip+='<option value="2">2</option>';trip+='<option value="3">3</option>';trip+='<option value="4">4</option>';trip+='<option value="5">5</option>';trip+='<option value="6">6</option>';trip+='<option value="7">7</option>';trip+='<option value="8">8</option>';trip+='</select>';trip+='<span class="help-text">2-11 years</span></div></div>';trip+='<div id="pax-infant">';trip+='<div class="field">';trip+='<label for="ddlInfants">Infants:</label>';trip+='<select id="ddlInfants">';trip+='<option value="0">0</option>';trip+='<option value="1">1</option>';trip+='<option value="2">2</option>';trip+='<option value="3">3</option>';trip+='</select>';trip+='<span class="help-text">&lt;24 months</span></div></div>';trip+='</fieldset>';trip+='<input type="hidden" type="hidden" name="hdnflightfaresFrom" id="hdnflightfaresFrom" value="'+FlightFrom+'" />';trip+='<input type="hidden" type="hidden" name="hdnflightfaresTo" id="hdnflightfaresTo" value="'+FlightTo+'" />';trip+='<input type="hidden" type="hidden" name="hdnflightfaresType" id="hdnflightfaresQuest" value="no" />';trip+='<input type="hidden" type="hidden" name="hdnflightfaresType" id="hdnflightfaresType" value="RT" />';trip+='<input type="hidden" type="hidden" name="hdnflightfaresAdult" id="hdnflightfaresAdult" value="1"/>';trip+='<input type="hidden" type="hidden" name="hdnflightfaresChild" id="hdnflightfaresChild" value="0"/>';trip+='<input type="hidden" type="hidden" name="hdnflightfaresInfant" id="hdnflightfaresInfant" value="0"/>';trip+='<div class="action"><a href="javascript:;" class="content-btn-tertiary-small closeFaresSelector" id="'+DisplayType+'-FareSelectorCancelBTN">CANCEL</a> <a href="javascript:;" id="'+DisplayType+'-FareSelectorSearchBTN" class="content-btn-small">SEARCH</a><div class="clear"></div></div></div>';$(this).closest('.quickselector').prepend(trip).hide().fadeIn('slow').focus();$(this).closest('.quickselector').promise().done(function(){$('html, body').animate({scrollTop:$(this).offset().top},'slow');});$(".closeFaresSelector").on("click",function(){$(this).closest('.FaresSelector.selector').fadeOut("slow");$(this).closest('.FaresSelector.selector').promise().done(function(){$(this).closest('.FaresSelector').remove();});});$("#list-FareSelectorSearchBTN, #banner-FareSelectorSearchBTN").on("click",function(){if($("#hdnflightfaresQuest").val()=="no"){var theDate=new Date();var month=new Array();month[0]="01";month[1]="02";month[2]="03";month[3]="04";month[4]="05";month[5]="06";month[6]="07";month[7]="08";month[8]="09";month[9]="10";month[10]="11";month[11]="12";var nextMonth=theDate.getMonth()+1;var fareDateFrom=month[nextMonth]+"-"+theDate.getDate()+"-"+theDate.getFullYear();var quickurl="https://dx.flights.kulula.com/dx/MNDX/#/date-selection?"
switch($("#hdnflightfaresType").val()){case"OW":quickurl+="journeyType=one-way";break;case"RT":quickurl+="journeyType=round-trip";break;}
quickurl+="&activeMonth="+fareDateFrom;quickurl+="&locale=en-GB";quickurl+="&ADT="+$('#hdnflightfaresAdult').val();quickurl+="&CHD="+$('#hdnflightfaresChild').val();quickurl+="&INF="+$('#hdnflightfaresInfant').val();switch($("#hdnflightfaresType").val()){case"OW":quickurl+="&origin="+$('#hdnflightfaresFrom').val();quickurl+="&destination="+$('#hdnflightfaresTo').val();break;case"RT":quickurl+="&origin="+$('#hdnflightfaresFrom').val();quickurl+="&destination="+$('#hdnflightfaresTo').val();quickurl+="&origin1="+$('#hdnflightfaresTo').val();quickurl+="&destination1="+$('#hdnflightfaresFrom').val();break;}
quickurl+="&currency=ZAR";quickurl+="&pointOfSale=ZA";window.location.href=quickurl;}});$(".farestrip").on("click",function(){var r="#"+this.id.replace("lifares","radfares");$(".farestrip").each(function(){$(this).removeClass("selected");});$("input[name='flightfares-type']").each(function(){$(this).prop('checked',false);$(this).removeAttr('checked');});$(this).addClass("selected");$(r).attr('checked','checked');$(r).prop('checked',true);$('#hdnflightfaresType').val($(r).val());return false;});$(".faresquestion").on("click",function(){var r="#"+this.id.replace("lifares","radfares");$(".faresquestion").each(function(){$(this).removeClass("selected");});$("input[name='faresselector-options']").each(function(){$(this).prop('checked',false);$(this).removeAttr('checked');});$(this).addClass("selected");$(r).attr('checked','checked');$(r).prop('checked',true);if(this.id=="lifares-option-no"){$('.FaresSelectorLoginPanel').hide();$('.FaresSelectorFlightPanel').hide().fadeIn('slow');}else{$('.FaresSelectorFlightPanel').hide();$('.FaresSelectorLoginPanel').hide().fadeIn('slow');}
$('#hdnflightfaresQuest').val($(r).val());return false;});$(".FaresSelector.selector #ddlAdults").on("click",function(){$('#hdnflightfaresAdult').val($(this).val());});$(".FaresSelector.selector #ddlChildren").on("click",function(){$('#hdnflightfaresChild').val($(this).val());});$(".FaresSelector.selector #ddlInfants").on("click",function(){$('#hdnflightfaresInfant').val($(this).val());});});});